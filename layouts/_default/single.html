{{ define "main" }}

{{- if .Section }}
<div class="progress-bar" aria-hidden="true"></div>
{{- end }}

<article>
  <header class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
    {{- if .Section }}
    {{ partial "post_meta.html" . }}
    {{- end }}
    {{- with .Params.tags }}
    <div class="post-tags">
      {{- range . }}
      <a href="{{ "tags/" | absURL }}{{ . | urlize }}/">{{ . }}</a>
      {{- end }}
    </div>
    {{- end }}
  </header>

  {{ partial "series.html" . }}
  {{ partial "toc.html" . }}

  <div class="post-content">
    {{ .Content }}
  </div>

  {{- if .Section }}
  {{ partial "related.html" . }}

  {{- $prev := .PrevInSection }}
  {{- $next := .NextInSection }}
  {{- if or $prev $next }}
  <nav class="post-nav" aria-label="Post navigation">
    {{- with $prev }}
    <a class="prev" href="{{ .Permalink }}">{{ .Title }}</a>
    {{- end }}
    {{- with $next }}
    <a class="next" href="{{ .Permalink }}">{{ .Title }}</a>
    {{- end }}
  </nav>
  {{- end }}
  {{- end }}
</article>

{{ end }}
